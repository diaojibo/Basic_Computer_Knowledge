## mysql存储引擎
存储引擎说白了就是如何存储数据、如何为存储的数据建立索引和如何更新、查询数据等技术的实现方法。因为在关系数据库中数据的存储是以表的形式存储的，所以存储引擎也可以称为**表类型**（即存储和操作此表的类型）。

在Oracle 和SQL Server等数据库中只有一种存储引擎，所有数据存储管理机制都是一样的。而MySql数据库提供了多种存储引擎。用户可以根据不同的需求为数据表选择不同的存储引擎，**用户也可以根据自己的需要编写自己的存储引擎**。


存储引擎是表级别的概念，所以才成为表类型，每创建一张表都可以指定所使用的存储引擎，但是并不建议每张表都交叉使用不同的引擎。

### myisam
这种引擎是mysql最早提供的。这种引擎又可以分为静态MyISAM、动态MyISAM 和压缩MyISAM三种

#### 静态myisam
如果数据表中的各数据列的长度都是预先固定好的，服务器将自动选择这种表类型。因为数据表中每一条记录所占用的空间都是一样的，所以这种表存取和更新的效率非常高。当数据受损时，恢复工作也比较容易做。

#### 动态myisam
如果数据表中出现**varchar、xxxtext或xxxBLOB**字段时，服务器将自动选择这种表类型。相对于静态MyISAM，这种表存储空间比较小，但由于每条记录的长度不一，所以多次修改数据后，**数据表中的数据就可能离散的存储在内存中**，进而导致执行效率下降。同时，**内存中也可能会出现很多碎片**。因此，这种类型的表要经常用optimize table 命令或优化工具来进行碎片整理。

#### 压缩MyISAM
以上说到的两种类型的表都可以用myisamchk工具压缩。这种类型的表进一步减小了占用的存储，但是这种表压缩之后不能再被修改。另外，因为是压缩数据，所以这种表在读取的时候要先时行解压缩。

#### 特性
**不管是何种MyISAM表，目前它都不支持事务，行级锁和外键约束的功能。**

MyISAM的表存储成3个文件。文件的名字与表名相同。拓展名为frm、MYD、MYI。其实，frm文件存储表的结构；MYD文件存储数据，是MYData的缩写；MYI文件存储索引，是MYIndex的缩写。

 **MyISAM类型的表强调性能，其执行速度比InnoDB类型更快但不提供事务的支持，也不支持外键，适用于大量select操作的应用场景**。

 ### InnoDB
 InnoDB是MySQL的**默认事务型引擎**，它被设计用来处理大量的短期(short-lived)事务。**除非有非常特别的原因需要使用其他的存储引擎，否则应该优先考虑InnoDB引擎。**

 InnoDB是基于聚簇索引建立的，聚簇索引对主键查询有很高的性能。不过它的二级索引(secondary index，非主键索引)中必须包含主键列，所以如果主键列很大的话，其他的所有索引都会很大。因此表上的索引较多的话，主键应当尽可能的小。

  InnoDB提供事务支持事务，外部键（foreign key）等高级数据库功能

   - **如果你的数据执行大量的INSERT或UPDATE，出于性能方面的考虑，应该使用InnoDB表**
   - **DELETE FROM table时，InnoDB不会重新建立表，而是一行一行的删除。**


近年来，InnoDB已有取代MyISAM之趋势。MySQL与mariadb的默认存储引擎已使用InnoDB。

InnoDB为行级锁，并使用间隙锁来防止幻读。当然InnoDB的行级锁也并非绝对，当SQL语句在执行过程中在不能确定扫描范围时也会对整张表进行锁定，例如updatestudents set sex=”M” where name like “%aaa%”;
