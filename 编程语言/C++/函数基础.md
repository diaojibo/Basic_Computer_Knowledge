## 函数基础
这里记录本人学习时不好记住的一些c++函数的基础概念。

定义函数时

``` c++
int fact(int v);

fact(5); //invoke
```

如上图，定义时写在里面的v是**形参**，实际调用时的5是**实参**。

### 局部静态对象
某些时候需要令局部变量生命周期贯穿函数调用及之后的时间，可以将局部变量定义为static。

内置类型局部静态变量初始化为0.

### 传值调用
c++函数调用时都是传值调用，传入的实参会被赋值给形参，我们可以通过传递指针，或者引用传递来改变实参对象的真实值。

### 形参的常量引用
当我们调用函数时，传递对象，我们当然是使用引用传递来**避免拷贝**。

然而，如若我们其实也**不希望改变实参的值，我们最好要使用常量引用**。这样程序员便不会误解。如果不使用常量引用形参，程序员很可能会认为，实参的值我们可以并且需要改变。

而且普通引用做形参也往往会引发错误

``` c++
findchar(string &s);

findchar("test!"); //invoke wrong!!
```

显然别名不能绑定到一个字面量上，但是常量引用是可以**通过临时变量绑定到一个常量上的**。

``` c++
findchar(const string &s);
```

这样定义才不会发生错误，并且也能被其他函数正确的调用。

### 数组形参
传递数组的时候，实际上是传递数组首元素的指针。

### 内联函数
将函数指定为内联函数(inline),就是将它在每个调用点上内联地展开，从而减少运行时的开销。

``` c++
inline const string &
shortString(const string &s1,const string &s2)
```

### 函数指针
函数指针指向的是函数而非对象，函数的类型由它的返回类型和形参类型共同决定，与函数名无关。

``` c++
bool t(int a,int b);
```

上面代码定义了一个函数，类型就是 bool(int,int) 也可以理解成是一个 "(int,int)->bool"类型

当我们要定义一个函数指针的时候，要像如下定义

``` c++
bool (*pf) (int,int);
```

根据由变量名由里到外的原则，我们很容易知道pf变量属于一个指针，然后它的类型是一个bool(int,int)函数。如果我们给pf赋一个函数的值，那我们就可以调用它。

``` c++
pf = t; //right
pf = &t; //right 相当于上面的等价
bool a = pf(1,2);
bool b = (*pf)(1,2);
bool c = t(1,2);
```



**两种赋值和三种调用都一样，本质上也等价，pf不需要解引用都可以直接调用或者赋值**。

此外，typedef也可以定义函数指针

``` c++
typedef A* (f)();
```

上面定义了一个名字为f的函数指针，这个函数指针类型是，返回值为A*，即A的指针，参数列表(形参)为空。
