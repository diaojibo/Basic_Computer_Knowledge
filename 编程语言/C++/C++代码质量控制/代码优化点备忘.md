## C++代码优化点 代码质量控制

### 魔鬼数字
意义不明的数字都要用宏定义

### 避免在循环strlen


### 返回值拷贝
涉及到左值和右值的知识点

首先，不能返回一个普通引用，有生命周期的问题，这个effective c++里已经有说明了。靠谱编译器会给出说明。

所以直接返回局部变量是一个方法。

函数的返回值是右值，代表的都是函数内的某个局部变量。所以返回想要避免调用一次拷贝构造函数的话，可以考虑在返回的时候使用const 引用

```
Foo f() {
  Foo a;
  a.i = 101;
  return a;
}
const Foo& foo = f();
```

由于是引用，所以就避免了拷贝。这里有几点需要注意。引用必须是静态的，也就是必须用const来修饰这个引用。这是因为函数的返回值属于右值，也就是（rvalue）。普通的引用是左值引用，也就是lvalue reference。左值引用不能指向右值引用，**只有const的左值引用才能用来指向右值**。

通过像这样const Foo& foo = f();，把临时的返回值赋值给一个const左值引用，f()返回值并不会立即销毁。**这等于是在const引用的作用域内，延长了f()返回值的存活时间**。

### 指针判空与置空
有要用到new，就要时刻记得判NULL
还有记得要delete，delete后要置空

### case语句
default要加上花括号