## 加壳
加壳的全称应该是可执行程序资源压缩，压缩后的程序可以直接运行。

加壳的另一种常用的方式是在二进制的程序中植入一段代码，在运行的时候**优先取得程序的控制权**，之后再把控制权交还给原始代码，这样做的目的是为了隐藏程序真正的OEP（入口点，防止被破解）。大多数病毒就是基于此原理。

这种技术也常用来保护软件版权，防止软件被破解。但对于病毒，加壳可以绕过一些杀毒软件的扫描，从而实现它作为病毒的一些入侵或破坏的一些特性。


### 本质

其实是利用特殊的算法，对可执行文件里的资源进行压缩，只不过这个压缩之后的文件，可以独立运行，**解压过程完全隐蔽，都在内存中完成**。它们附加在原程序上通过加载器载入内存后，**先于原始程序执行，得到控制权**，执行过程中对原始程序进行解密、还原，还原完成后再把控制权交还给原始程序，执行原来的代码部分。加上外壳后，原始程序代码在磁盘文件中一般是以加密后的形式存在的，**只在执行时在内存中还原**，这样就可以比较有效地防止破解者对程序文件的非法修改，同时也可以防止程序被静态反编译。

### 解压原理
**加壳工具在文件头里加了一段指令，告诉CPU，怎么才能解压自己。**现在的CPU都很快，所以这个解压过程你看不出什么东西。当你加壳时，其实就是给可执行的文件加上个外衣。

通常说的对外壳加密，都是指很多网上免费或者非免费的软件，被一些专门的加壳程序加壳，基本上是对程序的压缩或者不压缩。

**一般软件都加“壳”这样不但可以保护自己的软件不被破解、修改还可以增加运行时启动速度。**

当一个程序生成好后，很轻松的就可以利用诸如资源工具和反汇编工具对它进行修改，但如果程序员给程序加一个壳的话，那么至少这个加了壳的程序就不是那么好修改了，如果想修改就必须先脱壳。
