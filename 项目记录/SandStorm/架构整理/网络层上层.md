## 网络层上层封装


### CommandServer类
头文件在message目录下。顾名思义，CommandServer就是基于Command机制建立的Server类。

具有模板CommandServerContext，内部封装了：

 - 一个NetListenenr
 - 一个Map \_commandHanlders，用来存储具体Command收到时执行的方法。
 - \_connectHandler,一个函数，用以在连接成功时调用。

有成员函数

OnCommand方法，用来绑定Command和对应处理函数。要绑定的函数需要接受三个参数，CommandServerContext上下文，具体Command，Responser(也是一个函数，函数接受Response类作为参数)类，就是收到Response之后的处理函数。

OnConnection函数，绑定当连接建立时会调用的函数，这个绑定的函数需要接受一个参数TcpConnection类的一个**智能指针**。

### StartListen方法

StartListen方法，开始监听。监听的时候会调用自身的NetListener的OnConnection方法，这样当NetListener监听到数据到来的时候，就会调用所绑定的方法。
