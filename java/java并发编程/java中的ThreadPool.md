## ThreadPool
回顾一下线程的五个生命周期先
![](image/thread1.png)

那么什么时候应该应用线程池呢？

假设一个服务器完成一项任务所需时间为：T1 创建线程时间，T2 在线程中执行任务的时间，T3 销毁线程时间。

如果：**T1 + T3 远大于 T2**，则可以采用线程池，以提高服务器性能。

### 线程池的优点
合理利用线程池能够带来三个好处。
1. 降低资源消耗。通过重复利用已创建的线程降低线程创建和销毁造成的消耗。
2. 提高响应速度。当任务到达时，任务可以不需要等到线程创建就能立即执行。
3. 提高线程的可管理性。线程是稀缺资源，如果无限制的创建，不仅会消耗系统资源，还会降低系统的稳定性，使用线程池可以进行统一的分配，调优和监控。但是要做到合理的利用线程池，必须对其原理了如指掌。


那么线程池，从何说起呢？

在Executor框架的笔记中，我们知道了JUC包下，有Executors这个工具类。

并且我们也知道了线程池基本上都是要实现ExecutorService这个接口。

然后我们可以回顾下Executor接口继承关系的图
![](image/Executor.png)

因此我们便知道了，可以通过Executors这个工具类，来返回几种不同类型的线程池(实现了ExecutorService接口)

**有四种创建方法**

#### newCachedThreadPool
 - 缓存型池子，先查看池中有没有以前建立的线程，如果有，就 reuse 如果没有，就建一个新的线程加入池中
 - 缓存型池子通常用于执行一些生存期很短的异步型任务 因此在一些面向连接的 daemon 型 SERVER 中用得不多。但对于生存期短的异步任务，它是 Executor 的首选。
 - 能 reuse 的线程，必须是 timeout IDLE 内的池中线程，缺省 timeout 是 60s,超过这个 IDLE 时长，线程实例将被终止及移出池
